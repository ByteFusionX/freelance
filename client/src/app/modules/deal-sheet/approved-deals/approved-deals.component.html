<div class="bg-white mx-5 mt-5 rounded-2x max-h-[calc(100vh-70px)]">
    <div class="text-lg font-medium p-4 border-b border-b-gray-300 px-8">

        <div class="flex flex-col md:flex-row items-center justify-between md:items-end gap-3">
            <h3 class="font-semibold">Approved Deals</h3>
            <div class="w-full md:w-72">
                <div
                    class="h-10 inline-flex items-center justify-between text-body dark:text-white/60 bg-white border border-gray/60 rounded-[6px] pl-[20px] pr-[8px]">
                    <input type="text" placeholder="Customer / Sales Person" [formControl]="searchControl"
                        class="bg-transparent border-none text-[15px] shadow-none text-black flex items-center focus:outline-none">

                    <div
                        class="bg-violet-100 hover:bg-violet-200 flex justify-center items-center rounded-full  cursor-pointer">

                        <ng-icon name="heroMagnifyingGlass" class="text-sm text-gray-600  hover:text-violet-700 m-1.5">
                        </ng-icon>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <app-skelton-loading *ngIf="isLoading" [lineLength]="4"></app-skelton-loading>

    <div class="m-8  overflow-y-auto">
        <div *ngIf="isEmpty && !isLoading" class="w-full flex justify-center items-center pb-8">
            <div class="p-3">
                <img src="assets/images/empty.png" alt="">
                <p class="m-2 text-center text-gray-500">No Data</p>
            </div>
        </div>
        <section class="mat-elevation-z8 h-fit max-h-[57vh] overflow-auto" tabindex="0">
            <table *ngIf="!isLoading && !isEmpty" mat-table [dataSource]="dataSource" class="rounded-lg table-fixed">



                <ng-container matColumnDef="dealId">
                    <th *matHeaderCellDef
                        class="bg-gray-100  px-[12px] py-[16px] text-start text-dark  text-[15px] font-medium border-none before:hidden">
                        Deal Id </th>
                    <td mat-cell *matCellDef="let element">
                        <div class="flex items-center gap-2">
                            <a [ngClass]="{'text-orange-500': !element.dealData.seenByApprover, 'text-violet-500': element.dealData.seenByApprover}"
                                class="font-medium">{{element.dealData.dealId}}</a>
                        </div>
                    </td>
                </ng-container>

                <ng-container matColumnDef="quoteId">
                    <th *matHeaderCellDef
                        class="bg-gray-100  px-[12px] py-[16px] text-start text-dark  text-[15px] font-medium border-none before:hidden">
                        Quote Id </th>
                    <td mat-cell *matCellDef="let element" #quoteItem data-id="{{element._id}}"> <a
                            class="text-purple-600 font-medium">{{element.quoteId}}</a> </td>
                </ng-container>

                <ng-container matColumnDef="customerName">
                    <th *matHeaderCellDef
                        class="bg-gray-100  px-[12px] py-[16px] text-start text-dark  text-[15px] font-medium border-none before:hidden">
                        Customer </th>
                    <td mat-cell *matCellDef="let element"> {{element.client.companyName}} </td>
                </ng-container>

                <ng-container matColumnDef="description">
                    <th *matHeaderCellDef
                        class="bg-gray-100  px-[12px] py-[16px] text-start text-dark  text-[15px] font-medium border-none before:hidden">
                        Description </th>
                    <td mat-cell *matCellDef="let element"> {{element.subject}} </td>
                </ng-container>

                <ng-container matColumnDef="salesPerson">
                    <th *matHeaderCellDef
                        class="bg-gray-100  px-[12px] py-[16px] text-start text-dark  text-[15px] font-medium border-none before:hidden">
                        Sales Person </th>
                    <td mat-cell *matCellDef="let element"> {{element.createdBy.firstName+'
                        '+element.createdBy.lastName}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="department">
                    <th *matHeaderCellDef
                        class="bg-gray-100  px-[12px] py-[16px] text-start text-dark  text-[15px] font-medium border-none before:hidden">
                        Department </th>
                    <td mat-cell *matCellDef="let element"> {{element.department.departmentName}} </td>
                </ng-container>
                <ng-container matColumnDef="paymentTerms">
                    <th *matHeaderCellDef
                        class="bg-gray-100  px-[12px] py-[16px] text-start text-dark  text-[15px] font-medium border-none before:hidden">
                        Payment Terms </th>
                    <td mat-cell *matCellDef="let element"> {{element.dealData.paymentTerms}} </td>
                </ng-container>
                <ng-container matColumnDef="action">
                    <th *matHeaderCellDef
                        class="bg-gray-100  px-[12px] py-[16px] text-start text-dark  text-[15px] font-medium border-none before:hidden">
                        Actions </th>
                    <td mat-cell *matCellDef="let element;let i=index">
                        <div class="flex gap-2">
                            <div matTooltip="View Deal Sheet" matTooltipPosition="above" matTooltipClass="mat-tooltip"
                                (click)="onPreviewDeal(false,element,i)"
                                class="cursor-pointer w-8 h-8 rounded-full  border border-gray-300 hover:border-gray-500 hover:bg-white flex justify-center items-center">
                                <ng-icon name="heroEye" class="text-black"></ng-icon>
                            </div>

                            <div matTooltip="Revoke Approved Deal" matTooltipPosition="above"
                                matTooltipClass="mat-tooltip" (click)="revokeDeal(element,i)"
                                class="cursor-pointer w-8 h-8 rounded-full bg-red-600 flex justify-center items-center">
                                <ng-icon name="heroArrowUturnLeft" class="text-white text-sm"></ng-icon>
                            </div>
                        </div>
                    </td>
                </ng-container>




                <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;  let i= index"></tr>
            </table>
        </section>
        <div class="w-full bg-white" *ngIf="!isEmpty">
            <app-pagination [page]="page" [row]="row" [total]="total"
                (changeData)="onPageNumberClick($event)"></app-pagination>
        </div>
    </div>
    <div>
    </div>

</div>