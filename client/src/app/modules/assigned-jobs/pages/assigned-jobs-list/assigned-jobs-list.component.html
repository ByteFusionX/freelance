<div class="bg-white m-6 rounded-2xl">
    <div class="text-lg font-medium p-4 border-b border-b-gray-300 px-8">

        <div class="flex flex-col md:flex-row items-center justify-between md:items-end gap-3">
            <h3>Assigned Jobs</h3>
        </div>
    </div>

    <div class="m-8  overflow-y-auto">
        <app-skelton-loading *ngIf="isLoading && !isEmpty" [lineLength]="4"></app-skelton-loading>
        <section class="mat-elevation-z8 h-fit max-h-[64vh] overflow-auto" tabindex="0">
            <table mat-table *ngIf="!isLoading" [dataSource]="dataSource" class="rounded-lg table-fixed">
    
                <ng-container matColumnDef="enqId">
                    <th *matHeaderCellDef
                        class="bg-gray-100  px-[20px] py-[16px] text-start text-dark  text-[15px] font-medium border-none before:hidden">
                        Enquiry ID </th>
                    <td mat-cell *matCellDef="let element">
                        <p class="text-violet-500">{{element.enquiryId}}</p>
                    </td>
                </ng-container>
    
                <ng-container matColumnDef="customerName">
                    <th *matHeaderCellDef
                        class="bg-gray-100  px-[20px] py-[16px] text-start text-dark  text-[15px] font-medium border-none before:hidden">
                        Customer Name </th>
                    <td mat-cell *matCellDef="let element"> {{element.client[0].companyName}} </td>
                </ng-container>
    
                <ng-container matColumnDef="description">
                    <th *matHeaderCellDef
                        class="bg-gray-100  px-[20px] py-[16px] text-start text-dark  text-[15px] font-medium border-none before:hidden">
                        Description </th>
                    <td mat-cell *matCellDef="let element"> {{element.title}} </td>
                </ng-container>
    
                <ng-container matColumnDef="assignedBy">
                    <th *matHeaderCellDef
                        class="bg-gray-100  px-[20px] py-[16px] text-start text-dark  text-[15px] font-medium border-none before:hidden">
                        Assigned By </th>
                    <td mat-cell *matCellDef="let element"> {{element.salesPerson[0].firstName}}
                        {{element.salesPerson.lastName}}</td>
                </ng-container>
    
                <ng-container matColumnDef="department">
                    <th *matHeaderCellDef
                        class="bg-gray-100 px-[20px] py-[16px] text-start text-dark  text-[15px] font-medium border-none before:hidden">
                        Department </th>
                    <td mat-cell *matCellDef="let element"> {{element.department[0].departmentName}} </td>
                </ng-container>
    
                <ng-container matColumnDef="download">
                    <th *matHeaderCellDef
                        class="bg-gray-100 px-[20px] py-[16px] text-start text-dark  text-[15px] font-medium border-none before:hidden">
                        Download </th>
                    <td mat-cell *matCellDef="let element">
                        <button class="w-7 h-7 ms-2 border rounded-full flex justify-center items-center">
                            <ng-icon class="text-black" name="heroInboxArrowDown"></ng-icon>
                        </button>
                    </td>
                </ng-container>
    
                <ng-container matColumnDef="upload">
                    <th *matHeaderCellDef
                        class="bg-gray-100 px-[20px] py-[16px] text-start text-dark  text-[15px] font-medium border-none before:hidden">
                        Upload </th>
                    <td mat-cell *matCellDef="let element; let i = index">
                        <button class="w-7 h-7 ms-2 rounded-full bg-orange-500 flex justify-center items-center"
                            (click)="onUploadClicks(i)">
                            <ng-icon name="heroDocumentArrowUp" class="text-white"></ng-icon>
                        </button>
                        <div class="w-28" *ngIf="element.preSale.presaleFile">
                            <div class="flex items-center px-2 bg-gray-200 rounded-full m-1"
                                *ngFor="let file of element.preSale.presaleFile; let j=index">
                                <ng-icon name="heroXMark" class="text-orange-500 cursor-pointer"
                                    (click)="onFileRemoved(i,j)"></ng-icon>
                                <p class="text-sm px-2 w-28 truncate ..." matTooltip="{{file.name}}"
                                    matTooltipPosition="above" matTooltipClass="mat-tooltip">{{file.name}}</p>
                            </div>
                        </div>
                    </td>
                </ng-container>
    
                <ng-container matColumnDef="send">
                    <th *matHeaderCellDef
                        class="bg-gray-100  px-[20px] py-[16px] text-start text-dark  text-[15px] font-medium border-none before:hidden">
                    </th>
                    <td mat-cell *matCellDef="let element; let i = index">
                        <button
                            class="bg-violet-700 hover:bg-violet-600 text-white font-medium py-1 px-4 rounded-md text-sm"
                            (click)="onSendClicked(i)">
                            Send
                        </button>
                    </td>
                </ng-container>
    
                <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
        </section>
        <div class="w-full bg-white" *ngIf="!isEmpty">
            <app-pagination [page]="page" [row]="row" [total]="total" (changeData)="onDateChange($event)"></app-pagination>
        </div>
    </div>
    <div *ngIf="isEmpty" class="w-full flex justify-center items-center">
        <div class="p-3">
            <img src="assets/images/empty.png" alt="">
            <p class="m-2 text-center text-gray-500">No Data</p>
        </div>
    </div>
</div>