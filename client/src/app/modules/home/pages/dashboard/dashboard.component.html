<mat-drawer-container class="example-container" hasBackdrop="false" autosize>
    <mat-drawer #drawer mode="side" position="end" class="w-64 p-5 bg-white shadow-lg">
        <div class="flex flex-col space-y-5">
            <!-- Filter Header -->
            <div class="flex justify-between items-center">
                <h3 class="text-lg font-semibold">Filter Options</h3>
                <button (click)="drawer.close()" class="text-gray-500 hover:text-gray-800">
                    <ng-icon name="heroXMark" class="text-xl"></ng-icon>
                </button>
            </div>
            <!-- Year Filter -->
            <div>
                <p class="font-semibold text-gray-800 mb-2">Year</p>
                <div class="flex flex-col space-y-2">
                    <ng-container *ngFor="let year of getYears()">
                        <label class="inline-flex items-center">
                            <input type="checkbox" class="form-checkbox text-blue-600" />
                            <span class="ml-2 text-gray-700">{{ year }}</span>
                        </label>
                    </ng-container>
                </div>
            </div>

            <!-- Month Filter -->
            <div>
                <p class="font-semibold text-gray-800 mb-2">Month</p>
                <div class="grid grid-cols-2 gap-2">
                    <div class="flex flex-col space-y-2">
                        <ng-container *ngFor="let month of getMonths() | slice:0:6">
                            <label class="inline-flex items-center">
                                <input type="checkbox" class="form-checkbox text-blue-600" />
                                <span class="ml-2 text-gray-700">{{ month }}</span>
                            </label>
                        </ng-container>
                    </div>
                    <div class="flex flex-col space-y-2">
                        <ng-container *ngFor="let month of getMonths() | slice:6:12">
                            <label class="inline-flex items-center">
                                <input type="checkbox" class="form-checkbox text-blue-600" />
                                <span class="ml-2 text-gray-700">{{ month }}</span>
                            </label>
                        </ng-container>
                    </div>
                </div>
            </div>
            <!-- Department Filter -->
            <div>
                <p class="font-semibold text-gray-800 mb-2">Departments</p>
                <div class="flex flex-col space-y-2">
                    <label class="inline-flex items-center">
                        <input type="checkbox" class="form-checkbox text-blue-600" />
                        <span class="ml-2 text-gray-700">ICT</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="checkbox" class="form-checkbox text-blue-600" />
                        <span class="ml-2 text-gray-700">ELV</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="checkbox" class="form-checkbox text-blue-600" />
                        <span class="ml-2 text-gray-700">Other</span>
                    </label>
                </div>
            </div>

            <!-- Sales Person Filter -->
            <div>
                <p class="font-semibold text-gray-800 mb-2">Sales Person</p>
                <!-- <ng-select [items]="salesPersons" [(ngModel)]="selectedSalesPersons" [multiple]="true" bindLabel="name"
                    class="w-full">
                </ng-select> -->
            </div>
        </div>
    </mat-drawer>

    <div>
        <div class="md:p-8 p-5">
            <div class="w-full  flex justify-end">
                <div (click)="drawer.toggle()"
                    class="flex items-center cursor-pointer border border-gray/60 rounded-[6px] px-[20px] py-2 bg-white"
                    mat-button>
                    <ng-icon name="heroAdjustmentsHorizontal"></ng-icon>
                    <p class="mx-2 text-sm whitespace-nowrap">Filter By</p>
                </div>
            </div>
            <div class="w-full flex gap-3">
                <div class="w-2/6 flex flex-col gap-3">
                    <!-- Check if metrics are loading -->
                    <ng-container *ngIf="(dashboardMetrics$ | async) as metrics; else loading">
                        <div class="bg-white p-6 rounded-md" *ngFor="let metric of metrics" @opacityTrigger>
                            <p class="font-semibold text-sm">{{ metric.name }}</p>
                            <p class="font-bold text-[1.7rem]">
                                {{ metric.type === 'QAR' ? metric.value.toFixed(2) : metric.value }} {{ metric.type }}
                            </p>
                            <p class="font-medium text-gray-800 text-xs">
                                +{{ metric.type === 'QAR' ? metric.lastWeek.toFixed(2) : metric.lastWeek + ' ' + metric.type }}
                                {{ metric.lastWeekName }} this week
                            </p>
                        </div>
                    </ng-container>
            
                    <!-- Loading skeleton -->
                    <ng-template #loading>
                        <div class="bg-white p-2 rounded-md">
                            <app-skelton-loading [lineLength]="0" class="col-span-3"></app-skelton-loading>
                        </div>
                        <div class="bg-white p-2 rounded-md">
                            <app-skelton-loading [lineLength]="0" class="col-span-3"></app-skelton-loading>
                        </div>
                        <div class="bg-white p-2 rounded-md">
                            <app-skelton-loading [lineLength]="0" class="col-span-3"></app-skelton-loading>
                        </div>
                        <div class="bg-white p-2 rounded-md">
                            <app-skelton-loading [lineLength]="0" class="col-span-3"></app-skelton-loading>
                        </div>
                        <div class="bg-white p-2 rounded-md">
                            <app-skelton-loading [lineLength]="0" class="col-span-3"></app-skelton-loading>
                        </div>
                    </ng-template>
                </div>
                <div class="w-3/5 bg-red-400 h-3">

                    
                </div>
                <div class="w-2/5 bg-slate-500 h-3"></div>
            </div>
            
            <!-- <div class="w-full bg-white rounded-md mt-5  shadow-md" *ngIf="privileges?.dashboard?.totalEnquiry">
            <div class="p-10">
                <p class="text-md font-medium">Total no of Enquires</p>
                <div class="md:grid grid-cols-3 gap-10 mt-5">
                    <app-skelton-loading [lineLength]="1" *ngIf="isEnquiryLoading"
                        class="col-span-3"></app-skelton-loading>
                    <div class="md:col-span-1 flex mb-5" *ngFor="let data of enquiries$ | async; let i = index"
                        @opacityTrigger>
                        <div [ngSwitch]="data.departmentName.toLowerCase().trim()">
                            <div class="w-20 h-20 flex justify-center items-center rounded-full bg-violet-100"
                                *ngSwitchCase="'ict'">
                                <ng-icon name="heroClipboardDocumentList" class="text-5xl text-violet-700"></ng-icon>
                            </div>
                            <div class="w-20 h-20 flex justify-center items-center rounded-full bg-green-100"
                                *ngSwitchCase="'security system'">
                                <ng-icon name="heroShieldCheck" class="text-5xl text-green-700"></ng-icon>
                            </div>
                            <div class="w-20 h-20 flex justify-center items-center rounded-full bg-orange-100"
                                *ngSwitchCase="'distributions'">
                                <ng-icon name="heroCube" class="text-5xl text-orange-700"></ng-icon>
                            </div>
                            <div class="w-20 h-20 flex justify-center items-center rounded-full bg-lime-100"
                                *ngSwitchDefault>
                                <ng-icon name="heroRectangleStack" class="text-5xl text-lime-700"></ng-icon>
                            </div>
                        </div>
                        <div class="mx-5">
                            <span
                                class="text-gray-800 uppercase font-medium">{{data.departmentName}}</span>
                            <p class="text-3xl font-semibold mt-1">{{data.totalEnquiries}} <span
                                    class="text-xs text-gray-700">Nos</span></p>
                            <div class="text-sm text-gray-700 mt-2" *ngIf="data.totalEnquiries">
                                <a class="text-blue-500 underline uppercase cursor-pointer hover:text-blue-700 font-medium"
                                    (click)="onDepartmentSelect(data.departmentId)">See all reports</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="w-full rounded-md mt-5">
            <div class="md:grid grid-cols-3 gap-5">
                <div class="p-10 bg-white rounded-md mb-5  shadow-md    " *ngIf="privileges?.dashboard?.totalQuote">
                    <p class="text-md font-medium">Total No of Quote Submitted</p>
                    <app-skelton-loading [lineLength]="1" *ngIf="isQuoteLoading;else quoteBlock"
                        class="col-span-3"></app-skelton-loading>
                    <ng-template #quoteBlock>
                        <div class="mt-5 flex" @opacityTrigger>
                            <div class="w-20 h-20 flex justify-center items-center rounded-full bg-yellow-100">
                                <ng-icon name="heroNewspaper" class="text-5xl text-yellow-700"></ng-icon>
                            </div>
                            <div class="mx-5">
                                <div *ngIf="quotations$ | async as quote">
                                    <p class="text-3xl font-semibold mt-1">{{quote.total}} <span
                                            class="text-xs text-gray-700">Nos</span></p>
                                </div>
                                <div class="text-sm text-gray-700 mt-2">
                                    <a class="text-blue-500 underline uppercase cursor-pointer hover:text-blue-700 font-medium"
                                        [routerLink]="['/quotations/report']">See all reports</a>
                                </div>
                            </div>
                        </div>
                    </ng-template>
                </div>
                <div class="p-10 bg-white rounded-md mb-5  shadow-md" *ngIf="privileges?.dashboard?.totalJobs">
                    <p class="text-md font-medium">Total No of Jobs Awarded</p>
                    <app-skelton-loading [lineLength]="1" *ngIf="isJobLoading;else jobBlock"
                        class="col-span-3"></app-skelton-loading>
                    <ng-template #jobBlock>
                        <div class="mt-5 flex" @opacityTrigger>
                            <div class="w-20 h-20 flex justify-center items-center rounded-full bg-rose-100">
                                <ng-icon name="heroBriefcase" class="text-5xl text-rose-700"></ng-icon>
                            </div>
                            <div class="mx-5">
                                <div *ngIf="jobs$ | async as job">

                                    <p class="text-3xl font-semibold mt-1">{{job.total}} <span
                                            class="text-xs text-gray-700">Nos</span></p>
                                </div>
                                <div class="text-sm text-gray-700 mt-2">
                                    <a class="text-blue-500 underline uppercase cursor-pointer hover:text-blue-700 font-medium"
                                        [routerLink]="['/job-sheet']">See all reports</a>
                                </div>
                            </div>
                        </div>
                    </ng-template>
                </div>
                <div class="p-10 bg-white rounded-md mb-5 shadow-md" *ngIf="privileges?.dashboard?.totalPresale">
                    <p class="text-lg font-semibold text-gray-900">Presales</p>
                    <app-skelton-loading [lineLength]="1" *ngIf="isPresalesLoading; else presaleBlock" class="col-span-3"></app-skelton-loading>
                    <ng-template #presaleBlock>
                        <div class="mt-5 space-y-4" @opacityTrigger>
                            <div class="flex items-center space-x-4">
                                <div class="w-10 h-10 flex justify-center items-center rounded-full bg-red-100">
                                    <ng-icon name="heroIdentification" class="text-xl text-red-700"></ng-icon>
                                </div>
                                <div>
                                    <div *ngIf="presales$ | async as Presalse">
                                        <p [routerLink]="['/assigned-jobs']" class="text-gray-800 uppercase font-medium hover:underline hover:text-purple-600 cursor-pointer">Pending Job: <span class="text-red-700  hover:no-underline hover:text-red-700 ">{{Presalse.pending}}</span></p>
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-center space-x-4">
                                <div class="w-10 h-10 flex justify-center items-center rounded-full bg-green-100">
                                    <ng-icon name="heroCheckCircle" class="text-xl text-green-700"></ng-icon>
                                </div>
                                <div>
                                    <div *ngIf="presales$ | async as Presalse">
                                        <p [routerLink]="['/assigned-jobs/completed']"  class="text-gray-800 uppercase font-medium hover:underline hover:text-purple-600 cursor-pointer">Completed Job: <span class="text-green-700 hover:no-underline hover:text-green-700 ">{{Presalse.completed}}</span></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </ng-template>
                </div>
                
            </div>
        </div>
        <div class="w-full bg-white rounded-md mt-5  shadow-md"  *ngIf="privileges?.dashboard?.EnquiryChart && !noDataForChart">
            <div class="p-10">
                <p class="text-md font-medium">Enquires</p>
                <app-skelton-loading [lineLength]="3" *ngIf="!showChart" class="col-span-3"></app-skelton-loading>
                <div id="chart" *ngIf="showChart">
                    <apx-chart [series]="chartOptions.series!" [chart]="chartOptions.chart!"
                        [xaxis]="chartOptions.xaxis!" [stroke]="chartOptions.stroke!" [tooltip]="chartOptions.tooltip!"
                        [dataLabels]="chartOptions.dataLabels!"></apx-chart>
                </div>
            </div>
        </div> -->
        </div>

        <!-- Footer -->
        <!-- <div class="w-full h-10 bg-white relative">
        <div class="absolute bottom-0 right-0">
            <a href="https://github.com/ByteFusionX" class="text-xs underline text-violet-800 ">ByteFusionX</a>
        </div>
    </div> -->
    </div>

</mat-drawer-container>